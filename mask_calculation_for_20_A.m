basis_sequences_for_20_A = [1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0; ...
    1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0; ...
    1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1; ...
    1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1; ...
    1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 1; ...
    1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1; ...
    1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1; ...
    1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1; ...
    1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1; ...
    1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 1; ...
    1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1; ...
    1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1; ...
    1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1; ...
    1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1; ...
    1, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1; ...
    1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1; ...
    1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1; ...
    1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 1, 1; ...
    1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0; ...
    1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0];

basis_sequences_for_20_A_extended = [basis_sequences_for_20_A; zeros(12, 13)];

permutation_for_20_A = [31, 0, 20, 1, 2, 21, 3, 4, ...
    22, 5, 6, 23, 7, 8, 9, 24, ...
    19, 25, 10, 11, 12, 13, 26, 27, ...
    14, 15, 28, 16, 17, 18, 29, 30] + 1;

H = basis_sequences_for_20_A_extended(permutation_for_20_A, :);

mask = (H(:, 7:13)).';

% disp(mask);

% hadamard_matrix = 1 - 2 * H(:, 2:6);

pucch_mask_matrix_prime = zeros(32, 32);

for index = 0:127
  pucch_mask_matrix_prime(index+1, :) = mod(bitget(index, 7:-1:1) * mask, 2);     
end

pucch_mask_matrix = (1 - 2 * pucch_mask_matrix_prime);

save pucch_mask_matrix pucch_mask_matrix;