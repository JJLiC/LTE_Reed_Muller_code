basis_sequences_for_32_O = [1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1; ...
    1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1; ...
    1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1; ...
    1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1; ...
    1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1; ...
    1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1; ...
    1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1; ...
    1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1; ...
    1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1; ...
    1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1; ...
    1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1; ...
    1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1; ...
    1, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1; ...
    1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1; ...
    1, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1; ...
    1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1; ...
    1, 1, 1, 0, 1, 1, 1, 0, 0, 1, 0; ...
    1, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0; ...
    1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0; ...
    1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0; ...
    1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1; ...
    1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1; ...
    1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 1; ...
    1, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1; ...
    1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0; ...
    1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 1; ...
    1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0; ...
    1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0; ...
    1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0; ...
    1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0; ...
    1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1; ...
    1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

permutation_for_32_O = [31, 0, 20, 1, 2, 21, 3, 4, ...
    22, 5, 6, 23, 7, 8, 9, 24, ...
    19, 25, 10, 11, 12, 13, 26, 27, ...
    14, 15, 28, 16, 17, 18, 29, 30] + 1;

H = basis_sequences_for_32_O(permutation_for_32_O, :);

mask = (H(:, 7:11)).';

disp(mask);

hadamard_matrix = 1 - 2 * H(:, 2:6);

mask_matrix = zeros(32, 32);

for index = 0:31
  mask_matrix(index+1, :) = mod(bitget(index, 5:-1:1) * mask, 2);     
end

mask_matrix = (1 - 2 * mask_matrix);

save mask_matrix mask_matrix;